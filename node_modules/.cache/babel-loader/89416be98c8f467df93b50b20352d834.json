{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\closa\\\\Documents\\\\GitHub\\\\volunteer-hours\\\\src\\\\pages\\\\DataInput.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport firebase from 'firebase';\nimport { Plugins } from '@capacitor/core';\nimport { useDocument } from \"react-firebase-hooks/firestore\";\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonInput, IonItem, IonLabel, IonList, IonButton, IonDatetime } from '@ionic/react';\nimport './DataInput.css'; //interface TextEntryProps {\n//    onSubmit: (homeName: string, homeHours: number, homeDate: string) => void;\n//}\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function debugInfo(logInfo) {\n  console.log(logInfo.name, logInfo.hours, logInfo.date, logInfo.location);\n}\n;\nexport function clearInfo(info) {\n  info.name = '';\n  info.hours = 0;\n  info.date = '';\n  info.location = '';\n}\n;\nvar today = new Date();\n\nconst todaysDate = () => {\n  return today.toDateString();\n};\n\nconst DataInput = props => {\n  _s();\n\n  const [item, setItem] = useState({\n    name: '',\n    hours: 0,\n    date: '',\n    location: ''\n  });\n  const [value, loading, error] = useDocument(firebase.firestore().doc(\"items/\" + props.initialValue), {\n    snapshotListenOptions: {\n      includeMetadataChanges: true\n    }\n  });\n  useEffect(() => {\n    var _value$data;\n\n    !loading && props.initialValue && (value === null || value === void 0 ? void 0 : value.exists) && setItem((_value$data = value.data()) === null || _value$data === void 0 ? void 0 : _value$data.name);\n  }, [loading, props.initialValue, value]);\n\n  const addLocation = async () => {\n    const {\n      Geolocation\n    } = Plugins;\n    const position = await Geolocation.getCurrentPosition();\n    const newPos = \"Latitude: \" + position.coords.latitude + \" Longitude: \" + position.coords.longitude;\n    return setItem({ ...item,\n      location: newPos\n    });\n  };\n\n  const getValid = async () => {\n    console.log(\"test!\"); //props.onSubmit(name!, hours!, date!)\n\n    let collectionRef = firebase.firestore().collection(\"data\");\n\n    if (props.name) {\n      await collectionRef.doc(props.name).set({\n        title: item.name,\n        content: item.hours,\n        createdOn: new Date().getTime(),\n        location: item.location ? item.location : \"\"\n      }, {\n        merge: true\n      });\n      clearInfo(item);\n      setItem(item);\n      props.clear();\n    } else {\n      await collectionRef.add({\n        title: item.name,\n        content: item.hours,\n        createdOn: new Date().getTime(),\n        location: item.location ? item.location : \"\"\n      });\n      clearInfo(item);\n      setItem(item);\n      props.clear();\n    }\n  };\n\n  const updateField = e => {\n    e.preventDefault();\n    console.log(item.name, item.hours);\n    debugInfo(item);\n    setItem({ ...item,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(IonPage, {\n    children: [/*#__PURE__*/_jsxDEV(IonHeader, {\n      children: /*#__PURE__*/_jsxDEV(IonToolbar, {\n        children: /*#__PURE__*/_jsxDEV(IonTitle, {\n          children: \"Enter Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(IonContent, {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: getValid,\n        children: [/*#__PURE__*/_jsxDEV(IonList, {\n          children: [/*#__PURE__*/_jsxDEV(IonItem, {\n            children: [/*#__PURE__*/_jsxDEV(IonLabel, {\n              position: \"stacked\",\n              children: \"Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(IonInput, {\n              required: true,\n              value: item.name,\n              onIonChange: updateField\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(IonItem, {\n            children: [/*#__PURE__*/_jsxDEV(IonLabel, {\n              position: \"stacked\",\n              children: \"Hours Worked:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(IonInput, {\n              required: true,\n              type: \"number\",\n              value: item.hours,\n              onIonChange: updateField\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(IonItem, {\n            children: [/*#__PURE__*/_jsxDEV(IonLabel, {\n              position: \"stacked\",\n              children: \"Date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(IonDatetime, {\n              placeholder: todaysDate(),\n              value: item.date,\n              onIonChange: updateField\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(IonButton, {\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 9\n  }, this);\n};\n\n_s(DataInput, \"dbM3Ls67Z94PLWeDWBsXs9v6PHc=\", false, function () {\n  return [useDocument];\n});\n\n_c = DataInput;\nexport default DataInput;\n\nvar _c;\n\n$RefreshReg$(_c, \"DataInput\");","map":{"version":3,"sources":["C:/Users/closa/Documents/GitHub/volunteer-hours/src/pages/DataInput.tsx"],"names":["React","useState","useEffect","firebase","Plugins","useDocument","IonContent","IonHeader","IonPage","IonTitle","IonToolbar","IonInput","IonItem","IonLabel","IonList","IonButton","IonDatetime","debugInfo","logInfo","console","log","name","hours","date","location","clearInfo","info","today","Date","todaysDate","toDateString","DataInput","props","item","setItem","value","loading","error","firestore","doc","initialValue","snapshotListenOptions","includeMetadataChanges","exists","data","addLocation","Geolocation","position","getCurrentPosition","newPos","coords","latitude","longitude","getValid","collectionRef","collection","set","title","content","createdOn","getTime","merge","clear","add","updateField","e","preventDefault","target"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport firebase from 'firebase';\nimport {Plugins} from '@capacitor/core';\nimport DataProps from '../components/DataProps';\nimport {useDocument} from \"react-firebase-hooks/firestore\";\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, \n    IonInput, IonItem, IonLabel, IonList, IonButton, IonDatetime } from '@ionic/react';\nimport { Controller, useForm } from 'react-hook-form';\nimport './DataInput.css';\n\n\n//interface TextEntryProps {\n//    onSubmit: (homeName: string, homeHours: number, homeDate: string) => void;\n//}\nexport function debugInfo(logInfo: DataProps){\n    console.log(logInfo.name,logInfo.hours,logInfo.date, logInfo.location);\n};\n\nexport function clearInfo(info: DataProps){\n    info.name='';\n    info.hours=0;\n    info.date='';\n    info.location='';\n};\nvar today = new Date();\n\nconst todaysDate = () => {\n    return today.toDateString(); \n};\n\n\n\nconst DataInput: React.FC<DataProps> = (props: DataProps) => {\n    const [item, setItem] = useState<DataProps>({\n        name: '',\n        hours: 0,\n        date: '',\n        location: ''\n      });\n    \n    const [value, loading, error] = useDocument(\n        firebase.firestore().doc(\"items/\" + props.initialValue),\n        {\n            snapshotListenOptions: {includeMetadataChanges: true}\n        }\n    );\n\n      \n    useEffect(() => {\n        !loading && props.initialValue && value?.exists && setItem(value.data()?.name);\n    }, \n    [loading, props.initialValue, value]);\n    \n    const addLocation = async () => {\n        const {Geolocation} = Plugins;\n        const position = await Geolocation.getCurrentPosition();\n        const newPos =  \"Latitude: \" + position.coords.latitude + \" Longitude: \" + position.coords.longitude; \n        return setItem({\n            ...item,\n            location: newPos\n          });\n    }\n\n    const getValid = async () => {\n        console.log(\"test!\");\n        //props.onSubmit(name!, hours!, date!)\n\n        let collectionRef = firebase.firestore().collection(\"data\");\n        if(props.name) {\n            await(collectionRef).doc(props.name).set({title: item.name, content: item.hours, \n                createdOn: new Date().getTime(), location:item.location ? item.location: \"\",}, {merge:true});\n            clearInfo(item);\n            setItem(item);\n                props.clear();\n        }\n        else {\n            await collectionRef.add({title: item.name, content: item.hours, \n                createdOn: new Date().getTime(), location:item.location ? item.location: \"\",\n                });\n            clearInfo(item);\n            setItem(item);\n            props.clear();\n        }\n\n    };\n    \n      const updateField = (e: any) => {\n        e.preventDefault();\n        console.log(item.name,item.hours);\n        debugInfo(item);\n        setItem({\n          ...item,\n          [e.target.name]: e.target.value\n        });\n      };\n    \n    return (\n        <IonPage>\n          <IonHeader>\n            <IonToolbar>\n              <IonTitle>Enter Data</IonTitle>\n            </IonToolbar>\n          </IonHeader>\n          <IonContent>\n\n            <form onSubmit={getValid}>\n                <IonList>\n                    <IonItem>\n                        <IonLabel position=\"stacked\">Name:</IonLabel>\n                        <IonInput required={true} value={item.name} onIonChange={updateField}></IonInput>\n                    </IonItem>\n                    <IonItem>\n                        <IonLabel position=\"stacked\">Hours Worked:</IonLabel>\n                        <IonInput required={true} type=\"number\" value={item.hours} onIonChange={updateField}></IonInput>\n                    </IonItem>\n                    <IonItem>\n                        <IonLabel position=\"stacked\">Date:</IonLabel>\n                        <IonDatetime placeholder={todaysDate()} value={item.date} onIonChange={updateField}></IonDatetime>\n                    </IonItem>\n                </IonList>\n                <IonButton type=\"submit\">Submit</IonButton>\n            </form>\n          </IonContent>\n        </IonPage>\n      );\n};\nexport default DataInput;\n"]},"metadata":{},"sourceType":"module"}