{"ast":null,"code":"import _defineProperty from\"C:/Users/closa/Documents/GitHub/volunteer-hours/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"C:/Users/closa/Documents/GitHub/volunteer-hours/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/closa/Documents/GitHub/volunteer-hours/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/closa/Documents/GitHub/volunteer-hours/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/closa/Documents/GitHub/volunteer-hours/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import firebase from'firebase';import{Plugins}from'@capacitor/core';import{useDocument}from\"react-firebase-hooks/firestore\";import{IonContent,IonHeader,IonPage,IonTitle,IonToolbar,IonInput,IonItem,IonLabel,IonList,IonButton,IonDatetime}from'@ionic/react';import'./DataInput.css';//interface TextEntryProps {\n//    onSubmit: (homeName: string, homeHours: number, homeDate: string) => void;\n//}\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function debugInfo(logInfo){console.log(logInfo.name,logInfo.hours,logInfo.date,logInfo.location);};export function clearInfo(info){info.name='';info.hours=0;info.date='';info.location='';};var today=new Date();var todaysDate=function todaysDate(){return today.toDateString();};var DataInput=function DataInput(props){var _useState=useState({name:'',hours:0,date:'',location:''}),_useState2=_slicedToArray(_useState,2),item=_useState2[0],setItem=_useState2[1];var _useDocument=useDocument(firebase.firestore().doc(\"items/\"+props.initialValue),{snapshotListenOptions:{includeMetadataChanges:true}}),_useDocument2=_slicedToArray(_useDocument,3),value=_useDocument2[0],loading=_useDocument2[1],error=_useDocument2[2];useEffect(function(){!loading&&props.initialValue&&value.exists&&setItem(value.data().name);},[loading,props.initialValue,value]);var addLocation=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var Geolocation,position,newPos;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Geolocation=Plugins.Geolocation;_context.next=3;return Geolocation.getCurrentPosition();case 3:position=_context.sent;newPos=\"Latitude: \"+position.coords.latitude+\" Longitude: \"+position.coords.longitude;return _context.abrupt(\"return\",setItem(_objectSpread(_objectSpread({},item),{},{location:newPos})));case 6:case\"end\":return _context.stop();}}},_callee);}));return function addLocation(){return _ref.apply(this,arguments);};}();var getValid=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var collectionRef;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"test!\");//props.onSubmit(name!, hours!, date!)\ncollectionRef=firebase.firestore().collection(\"data\");if(!props.name){_context2.next=10;break;}_context2.next=5;return collectionRef.doc(props.name).set({title:item.name,content:item.hours,createdOn:new Date().getTime(),location:item.location?item.location:\"\"},{merge:true});case 5:clearInfo(item);setItem(item);props.clear();_context2.next=15;break;case 10:_context2.next=12;return collectionRef.add({title:item.name,content:item.hours,createdOn:new Date().getTime(),location:item.location?item.location:\"\"});case 12:clearInfo(item);setItem(item);props.clear();case 15:case\"end\":return _context2.stop();}}},_callee2);}));return function getValid(){return _ref2.apply(this,arguments);};}();var updateField=function updateField(e){e.preventDefault();console.log(item.name,item.hours);debugInfo(item);setItem(_objectSpread(_objectSpread({},item),{},_defineProperty({},e.target.name,e.target.value)));};return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsx(IonToolbar,{children:/*#__PURE__*/_jsx(IonTitle,{children:\"Enter Data\"})})}),/*#__PURE__*/_jsx(IonContent,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:getValid,children:[/*#__PURE__*/_jsxs(IonList,{children:[/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Name:\"}),/*#__PURE__*/_jsx(IonInput,{required:true,value:item.name,onIonChange:updateField})]}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Hours Worked:\"}),/*#__PURE__*/_jsx(IonInput,{required:true,type:\"number\",value:item.hours,onIonChange:updateField})]}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Date:\"}),/*#__PURE__*/_jsx(IonDatetime,{placeholder:todaysDate(),value:item.date,onIonChange:updateField})]})]}),/*#__PURE__*/_jsx(IonButton,{type:\"submit\",children:\"Submit\"})]})})]});};export default DataInput;","map":{"version":3,"sources":["C:/Users/closa/Documents/GitHub/volunteer-hours/src/pages/DataInput.tsx"],"names":["React","useState","useEffect","firebase","Plugins","useDocument","IonContent","IonHeader","IonPage","IonTitle","IonToolbar","IonInput","IonItem","IonLabel","IonList","IonButton","IonDatetime","debugInfo","logInfo","console","log","name","hours","date","location","clearInfo","info","today","Date","todaysDate","toDateString","DataInput","props","item","setItem","firestore","doc","initialValue","snapshotListenOptions","includeMetadataChanges","value","loading","error","exists","data","addLocation","Geolocation","getCurrentPosition","position","newPos","coords","latitude","longitude","getValid","collectionRef","collection","set","title","content","createdOn","getTime","merge","clear","add","updateField","e","preventDefault","target"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport firebase from 'firebase';\nimport {Plugins} from '@capacitor/core';\nimport DataProps from '../components/DataProps';\nimport {useDocument} from \"react-firebase-hooks/firestore\";\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, \n    IonInput, IonItem, IonLabel, IonList, IonButton, IonDatetime } from '@ionic/react';\nimport { Controller, useForm } from 'react-hook-form';\nimport './DataInput.css';\n\n\n//interface TextEntryProps {\n//    onSubmit: (homeName: string, homeHours: number, homeDate: string) => void;\n//}\nexport function debugInfo(logInfo: DataProps){\n    console.log(logInfo.name,logInfo.hours,logInfo.date, logInfo.location);\n};\n\nexport function clearInfo(info: DataProps){\n    info.name='';\n    info.hours=0;\n    info.date='';\n    info.location='';\n};\nvar today = new Date();\n\nconst todaysDate = () => {\n    return today.toDateString(); \n};\n\n\n\nconst DataInput: React.FC<DataProps> = (props: DataProps) => {\n    const [item, setItem] = useState<DataProps>({\n        name: '',\n        hours: 0,\n        date: '',\n        location: ''\n      });\n    \n    const [value, loading, error] = useDocument(\n        firebase.firestore().doc(\"items/\" + props.initialValue),\n        {\n            snapshotListenOptions: {includeMetadataChanges: true}\n        }\n    );\n\n      \n    useEffect(() => {\n        !loading && props.initialValue && value.exists && setItem(value.data().name);\n    }, \n    [loading, props.initialValue, value]);\n    \n    const addLocation = async () => {\n        const {Geolocation} = Plugins;\n        const position = await Geolocation.getCurrentPosition();\n        const newPos =  \"Latitude: \" + position.coords.latitude + \" Longitude: \" + position.coords.longitude; \n        return setItem({\n            ...item,\n            location: newPos\n          });\n    }\n\n    const getValid = async () => {\n        console.log(\"test!\");\n        //props.onSubmit(name!, hours!, date!)\n\n        let collectionRef = firebase.firestore().collection(\"data\");\n        if(props.name) {\n            await(collectionRef).doc(props.name).set({title: item.name, content: item.hours, \n                createdOn: new Date().getTime(), location:item.location ? item.location: \"\",}, {merge:true});\n            clearInfo(item);\n            setItem(item);\n                props.clear();\n        }\n        else {\n            await collectionRef.add({title: item.name, content: item.hours, \n                createdOn: new Date().getTime(), location:item.location ? item.location: \"\",\n                });\n            clearInfo(item);\n            setItem(item);\n            props.clear();\n        }\n\n    };\n    \n      const updateField = e => {\n        e.preventDefault();\n        console.log(item.name,item.hours);\n        debugInfo(item);\n        setItem({\n          ...item,\n          [e.target.name]: e.target.value\n        });\n      };\n    \n    return (\n        <IonPage>\n          <IonHeader>\n            <IonToolbar>\n              <IonTitle>Enter Data</IonTitle>\n            </IonToolbar>\n          </IonHeader>\n          <IonContent>\n\n            <form onSubmit={getValid}>\n                <IonList>\n                    <IonItem>\n                        <IonLabel position=\"stacked\">Name:</IonLabel>\n                        <IonInput required={true} value={item.name} onIonChange={updateField}></IonInput>\n                    </IonItem>\n                    <IonItem>\n                        <IonLabel position=\"stacked\">Hours Worked:</IonLabel>\n                        <IonInput required={true} type=\"number\" value={item.hours} onIonChange={updateField}></IonInput>\n                    </IonItem>\n                    <IonItem>\n                        <IonLabel position=\"stacked\">Date:</IonLabel>\n                        <IonDatetime placeholder={todaysDate()} value={item.date} onIonChange={updateField}></IonDatetime>\n                    </IonItem>\n                </IonList>\n                <IonButton type=\"submit\">Submit</IonButton>\n            </form>\n          </IonContent>\n        </IonPage>\n      );\n};\nexport default DataInput;\n"]},"metadata":{},"sourceType":"module"}