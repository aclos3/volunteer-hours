{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\closa\\\\Documents\\\\GitHub\\\\volunteer-hours\\\\src\\\\pages\\\\DataInput.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport firebase from 'firebase';\nimport { useDocument } from \"react-firebase-hooks/firestore\";\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonInput, IonItem, IonLabel, IonList, IonButton, IonDatetime } from '@ionic/react';\nimport './DataInput.css'; //interface TextEntryProps {\n//    onSubmit: (homeName: string, homeHours: number, homeDate: string) => void;\n//}\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function debugInfo(logInfo) {\n  console.log(logInfo.name, logInfo.hours, logInfo.date);\n}\n;\nexport function clearInfo(info) {\n  info.name = '';\n  info.hours = 0;\n  info.date = '';\n}\n;\nvar today = new Date();\n\nconst todaysDate = () => {\n  return today.toDateString();\n};\n\nconst DataInput = props => {\n  _s();\n\n  const [item, setItem] = useState({\n    name: '',\n    hours: 0,\n    date: ''\n  });\n  const [value, loading, error] = useDocument(firebase.firestore().doc(\"items/\" + props.initialValue), {\n    snapshotListenOptions: {\n      includeMetadataChanges: true\n    }\n  });\n  useEffect(() => {\n    var _value$data;\n\n    !loading && props.initialValue && (value === null || value === void 0 ? void 0 : value.exists) && setItem((_value$data = value.data()) === null || _value$data === void 0 ? void 0 : _value$data.name);\n  }, [loading, props.initialValue, value]);\n\n  const getValid = async () => {\n    let collectionRef = firebase.firestore().collection(\"data\");\n\n    if (!item.date) {\n      item.date = todaysDate();\n    }\n\n    if (props.name) {\n      //console.log(\"Name populated! name: \" + item.name + \", Hours: \" + item.hours + \", Date: \" + item.date)\n      await collectionRef.doc(props.name).set({\n        name: item.name,\n        hours: item.hours,\n        date: item.date,\n        createdOn: new Date().getTime()\n      }, {\n        merge: true\n      });\n      clearInfo(item);\n      setItem(item);\n      props.clear();\n    } else {\n      //console.log(\"Name new! name: \" + item.name + \", Hours: \" + item.hours + \", Date: \" + item.date)\n      await collectionRef.add({\n        name: item.name,\n        hours: item.hours,\n        date: item.date,\n        createdOn: new Date().getTime()\n      });\n      clearInfo(item);\n      setItem(item);\n      props.clear();\n    }\n  };\n\n  const updateField = e => {\n    e.preventDefault();\n    console.log(item.name, item.hours, item.date);\n    debugInfo(item);\n    setItem({ ...item,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(IonPage, {\n    children: [/*#__PURE__*/_jsxDEV(IonHeader, {\n      children: /*#__PURE__*/_jsxDEV(IonToolbar, {\n        children: /*#__PURE__*/_jsxDEV(IonTitle, {\n          children: \"Enter Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(IonContent, {\n      children: [/*#__PURE__*/_jsxDEV(IonList, {\n        children: [/*#__PURE__*/_jsxDEV(IonItem, {\n          children: [/*#__PURE__*/_jsxDEV(IonLabel, {\n            position: \"stacked\",\n            children: \"Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(IonInput, {\n            required: true,\n            value: item.name,\n            name: \"name\",\n            onIonChange: updateField\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(IonItem, {\n          children: [/*#__PURE__*/_jsxDEV(IonLabel, {\n            position: \"stacked\",\n            children: \"Hours Worked:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(IonInput, {\n            required: true,\n            type: \"number\",\n            value: item.hours,\n            name: \"hours\",\n            onIonChange: updateField\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(IonItem, {\n          children: [/*#__PURE__*/_jsxDEV(IonLabel, {\n            position: \"stacked\",\n            children: \"Date:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(IonDatetime, {\n            placeholder: todaysDate(),\n            value: item.date,\n            name: \"date\",\n            onIonChange: updateField\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(IonButton, {\n        type: \"submit\",\n        onClick: () => {\n          getValid();\n        },\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n};\n\n_s(DataInput, \"Q1Uf4Kg5WkjC1vdiEopJ8lLXYgQ=\", false, function () {\n  return [useDocument];\n});\n\n_c = DataInput;\nexport default DataInput;\n\nvar _c;\n\n$RefreshReg$(_c, \"DataInput\");","map":{"version":3,"sources":["C:/Users/closa/Documents/GitHub/volunteer-hours/src/pages/DataInput.tsx"],"names":["React","useState","useEffect","firebase","useDocument","IonContent","IonHeader","IonPage","IonTitle","IonToolbar","IonInput","IonItem","IonLabel","IonList","IonButton","IonDatetime","debugInfo","logInfo","console","log","name","hours","date","clearInfo","info","today","Date","todaysDate","toDateString","DataInput","props","item","setItem","value","loading","error","firestore","doc","initialValue","snapshotListenOptions","includeMetadataChanges","exists","data","getValid","collectionRef","collection","set","createdOn","getTime","merge","clear","add","updateField","e","preventDefault","target"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport firebase from 'firebase';\nimport {Plugins} from '@capacitor/core';\nimport DataProps from '../components/DataProps';\nimport {useDocument} from \"react-firebase-hooks/firestore\";\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, \n    IonInput, IonItem, IonLabel, IonList, IonButton, IonDatetime } from '@ionic/react';\nimport { Controller, useForm } from 'react-hook-form';\nimport './DataInput.css';\n\n\n//interface TextEntryProps {\n//    onSubmit: (homeName: string, homeHours: number, homeDate: string) => void;\n//}\nexport function debugInfo(logInfo: DataProps){\n    console.log(logInfo.name,logInfo.hours,logInfo.date);\n};\n\nexport function clearInfo(info: DataProps){\n    info.name='';\n    info.hours=0;\n    info.date='';\n};\nvar today = new Date();\n\nconst todaysDate = () => {\n    return today.toDateString(); \n};\n\nconst DataInput: React.FC<DataProps> = (props) => {\n    const [item, setItem] = useState<DataProps>({\n        name: '',\n        hours: 0,\n        date: '',\n      });\n    \n    const [value, loading, error] = useDocument(\n        firebase.firestore().doc(\"items/\" + props.initialValue),\n        {\n            snapshotListenOptions: {includeMetadataChanges: true}\n        }\n    );\n\n    useEffect(() => {\n        !loading && props.initialValue && value?.exists && setItem(value.data()?.name);\n    }, \n    [loading, props.initialValue, value]);\n    \n    const getValid = async () => {\n\n        let collectionRef = firebase.firestore().collection(\"data\");\n        if(!item.date) {\n            item.date = todaysDate();\n        }\n\n        if(props.name) {\n            //console.log(\"Name populated! name: \" + item.name + \", Hours: \" + item.hours + \", Date: \" + item.date)\n            await(collectionRef).doc(props.name).set({name: item.name, hours: item.hours, date: item.date,\n                createdOn: new Date().getTime(),}, {merge:true});\n            clearInfo(item);\n            setItem(item);\n                props.clear();\n        }\n        else {\n            //console.log(\"Name new! name: \" + item.name + \", Hours: \" + item.hours + \", Date: \" + item.date)\n            await collectionRef.add({name: item.name, hours: item.hours, date: item.date, \n                createdOn: new Date().getTime(),\n                });\n            clearInfo(item);\n            setItem(item);\n            props.clear();\n        }\n\n    };\n    \n      const updateField = (e: any) => {\n        e.preventDefault();\n        console.log(item.name,item.hours,item.date);\n        debugInfo(item);\n        setItem({\n          ...item,\n          [e.target.name]: e.target.value\n        });\n      };\n    \n    return (\n        <IonPage>\n          <IonHeader>\n            <IonToolbar>\n              <IonTitle>Enter Data</IonTitle>\n            </IonToolbar>\n          </IonHeader>\n          <IonContent>\n                <IonList>\n                    <IonItem>\n                        <IonLabel position=\"stacked\">Name:</IonLabel>\n                        <IonInput required={true} value={item.name}  name=\"name\" onIonChange={updateField}></IonInput>\n                    </IonItem>\n                    <IonItem>\n                        <IonLabel position=\"stacked\">Hours Worked:</IonLabel>\n                        <IonInput required={true} type=\"number\" value={item.hours} name=\"hours\" onIonChange={updateField}></IonInput>\n                    </IonItem>\n                    <IonItem>\n                        <IonLabel position=\"stacked\">Date:</IonLabel>\n                        <IonDatetime placeholder={todaysDate()} value={item.date} name=\"date\" onIonChange={updateField}></IonDatetime>\n                    </IonItem>\n                </IonList>\n                <IonButton type=\"submit\" onClick={()=>{\n                    getValid();\n                }}>Submit</IonButton>\n          </IonContent>\n        </IonPage>\n      );\n};\nexport default DataInput;\n"]},"metadata":{},"sourceType":"module"}